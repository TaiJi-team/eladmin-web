<!DOCTYPE html>
<html>

<head>
    <title>工作台</title>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <style>
        .layui-card-header {
            text-align:left;
        }
        .layuiadmin-badge {
            float:right;
            margin-top:12px;
        }
        .big-font {
            text-align:left;
            font-size: 250%;
            height: 30px;
        }
        .my-tab-item {
            vertical-align: middle;
            text-align: center;
            line-height: 40px;
            margin-right: 20px;
            padding: 0 15px 12px 15px;
            cursor: pointer;
        }
        .my-tab-item-select {
            border: none;
            border-radius: 0;
            border-bottom: 2px solid #5FB878;
        }
        .my-tab-content {
            height: 300px;
        }
        .comp-sign {
            z-index: 1000;
        }
    </style>
</head>
<body>

    <div class="layui-btn-container" style="margin: 2% 0 0 18%;">
        <button class="layui-btn" type="button" style="float: left;" auth-type="1">企业入驻</button>
        <ul class="layui-nav layui-bg-green btnz" lay-filter="" style="font-size: 12px;border-radius: 0px;float: left;padding:0px 0px 0px 0px;margin: 0 1% 0 0%;">
            <li class="layui-nav-item" style="line-height: 34px;">
                <a href="javascript:;" style="color:white;font-size: 14px;padding: 0px 30px 0px 20px;">金融机构入驻<span class="layui-nav-more" style="right: 10px;font-size: 12px;"></span></a>
                <dl class="layui-nav-child" style="top: 28px;line-height: 31px;padding: 0px 0px 0px 0px;background-color: rgb(39, 172, 39);"> <!-- 二级菜单 -->
                    <dd><button class="layui-btn layui-btn layui-btn-sm layui-btn-fluid" auth-type="2-0" style="margin-bottom: 1%;">金融机构</button></dd>
                    <dd><button class="layui-btn layui-btn layui-btn-sm layui-btn-fluid" auth-type="2-1" style="margin-bottom: 1%;">信用机构</button></dd>
                    <dd><button class="layui-btn layui-btn layui-btn-sm layui-btn-fluid" auth-type="2-2" style="margin-bottom: 1%;">投资机构</button></dd>
                    <dd><button class="layui-btn layui-btn layui-btn-sm layui-btn-fluid" auth-type="2-3" style="margin-bottom: 1%;">保险公司</button></dd>
                    <dd><button class="layui-btn layui-btn layui-btn-sm layui-btn-fluid" auth-type="2-4" style="margin-bottom: 1%;">担保机构</button></dd>
                </dl>
            </li>
        </ul>
        <button class="layui-btn" type="button" style="float: left;" auth-type="3">运营公司入驻</button>
    </div>

<!-- <div class="layui-card-body" style="text-align: center;">
    <div class="layui-row layui-col-space10">
        <div class="layui-col-sm2 layui-col-md2">
            <div class="layui-card">
                <div class="layui-card-header">在线人数
                    <span class="layui-badge layui-bg-cyan layuiadmin-badge">时</span>
                </div>
                <div class="layui-card-body layuiadmin-card-list">
                    <p class="big-font" id="userCnt"></p>
                </div>
            </div>
        </div>
        <div class="layui-col-sm2 layui-col-md2">
            <div class="layui-card">
                <div class="layui-card-header">PV
                    <span class="layui-badge layui-bg-green layuiadmin-badge">天</span>
                </div>
                <div class="layui-card-body layuiadmin-card-list">
                    <p class="big-font" id="pv"></p>
                </div>
            </div>
        </div>
        <div class="layui-col-sm2 layui-col-md2">
            <div class="layui-card">
                <div class="layui-card-header">UV
                    <span class="layui-badge layui-bg-green layuiadmin-badge">天</span>
                </div>
                <div class="layui-card-body layuiadmin-card-list">
                    <p class="big-font" id="uv"></p>
                </div>
            </div>
        </div>
        <div class="layui-col-sm3 layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header">周访问量
                    <span class="layui-badge layui-bg-blue layuiadmin-badge">周</span>
                </div>
                <div class="layui-card-body layuiadmin-card-list">
                    <p class="big-font" id="weekPv"></p>
                </div>
            </div>
        </div>
        <div class="layui-col-sm3 layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header">月访问量
                    <span class="layui-badge layui-bg-orange layuiadmin-badge">月</span>
                </div>
                <div class="layui-card-body layuiadmin-card-list">
                    <p class="big-font" id="monthPv"></p>
                </div>
            </div>
        </div>
    </div>
    <div class="layui-row layui-col-space10">
        <div class="layui-col-lg12 layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-header">
                    <a id="weekTab" class="my-tab-item my-tab-item-select">周流量趋势</a>
                    <a id="dayTab" class="my-tab-item">天流量趋势</a>
                </div>
                <div class="layui-card-body">
                    <div id="week-container" tabId="weekTab" class="my-tab-content"></div>
                    <div id="date-container" tabId="dayTab" class="my-tab-content" style="display: none"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="layui-row layui-col-space10">
        <div class="layui-col-lg6 layui-col-md6">
            <div class="layui-card">
                <div class="card-block">
                    <div id="browser-container" style="height:300px"></div>
                </div>
            </div>
        </div>
        <div class="layui-col-lg6 layui-col-lg6">
            <div class="layui-card">
                <div class="card-block">
                    <div id="operatingSystem-container" style="height:300px"></div>
                </div>
            </div>
        </div>
    </div>
</div> -->

    <!-- 企业签约 -->
    <div class="comp-sign" style="display: none;">
        <h2>企业签约</h2>
        <p>正文 条款</p>
    </div>
    
    <!-- 金融机构签约 -->
    <div class="fin-org-sign" style="display: none;">
        <h2>金融机构签约</h2>
        <p>正文 条款</p>
    </div>

    <!-- 运营机构签约 -->
    <div class="oper-org-sign" style="display: none;">
        <h2>运营机构签约</h2>
        <p>正文 条款</p>
    </div>

<script type="text/javascript">
    layui.use(['admin', "echarts"], function () {
        let admin = layui.admin;
        let echarts = layui.echarts;
        let statData;

        $('button.layui-btn').on('click', function(){
            let type = $(this).attr('auth-type');
            // layer.msg(type, {icon: 5, time: 1000});
            const config = {
                type: type
            };
            if(type === '1'){
                // 企业签约
                config.ele = 'comp-sign'
                config.title = '企业签约'
                config.pageUrl = '/pages/sign/comp-sign.html'
                toSign(config)
                return;
            }
            if(type === '3'){
                // 金融机构签约
                config.ele = 'fin-org-sign'
                config.title = '运营机构签约'
                config.pageUrl = '/pages/sign/oper-org-sign.html'
                toSign(config)
                return;
            }
            config.ele = 'oper-org-sign'
            config.title = '金融机构签约'
            config.pageUrl = '/pages/sign/fin-org-sign.html'
            toSign(config)
        })
    });

    function toSign(cfg) {
        layer.open({
            type: 2,
            // area: '70%',
            // shadeClose: false,
            area: ['600px', '680px'],
            shade: 0,
            content: cfg.pageUrl,
            zIndex: layer.zIndex,
            success: function() {
                $('.layui-layer').css({
                    'z-index': '10000000',
                    'width': '86%',
                    'height': '90%',
                    'top': '8%',
                    'left': '13%'
                })
                $('.layui-layer-page .layui-layer-content').css({
                    'overflow': 'hidden'
                })
                $('.layui-layer-btn').css({
                    'text-align': 'center',
                    'display': 'none'
                })
                $($('iframe')[0].contentWindow).scroll(function() {
                    const sHeight = document.getElementsByTagName('iframe')[0].contentDocument.body.scrollHeight;
                    const sTop = frames[0].document.documentElement.scrollTop;
                    // layer.msg('sHeight: ' + sHeight + ', sTop: ' + sTop, {icon: 5, time: 2000})
                    if(sTop / sHeight > 0.8) {
                        $('.layui-layer-btn').css({
                            'display': 'block'
                        })
                    } else{
                        $('.layui-layer-btn').css({
                            'display': 'none'
                        })
                    }

                });
            },
            // cancel: function(){
            //     // $('.' + cfg.ele).css({"display": "none"})
            // },
            btn: ['我同意', '关闭'],
            yes: function(){
                layer.closeAll();
                localStorage.setItem('auth-redirect', 'console')
                location.href = '#!comp-auth'
            },
            btn2: function(){
                layer.closeAll();
            }
        });
        
    }

    function toSignByDom(cfg) {
        layer.open({
            type: 1,
            title: cfg.title,
            area: '70%',
            // shadeClose: false,
            shade: 0,
            content: $('.' + cfg.ele),
            zIndex: layer.zIndex,
            success: function() {
                $('.layui-layer').css({
                    'z-index': '10000000',
                    'width': '75%',
                    'top': '25%',
                    'left': '20%'
                })
                $('.layui-layer-page .layui-layer-content').css({
                    'overflow': 'visible'
                })
            },
            cancel: function(){
                $('.' + cfg.ele).css({"display": "none"})
            },
        });
        
    }
</script>
</body>

</html>